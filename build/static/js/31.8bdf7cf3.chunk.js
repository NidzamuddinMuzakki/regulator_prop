(window.webpackJsonp=window.webpackJsonp||[]).push([[31],{1103:function(e,t,a){"use strict";a.d(t,"a",function(){return l});var n=a(1),r=a(519),o=a(1205),i=a.n(o),l=(a(110),function e(){var t=this;Object(r.a)(this,e),this.login=function(e,a){return t.fetch("http://34.101.137.61:22112/credential_service/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e,password:a})}).then(function(e){return t.setToken(e.data),console.log(e.data),e})},this.loggedIn=function(){var e=t.getToken();return!!e&&!t.isTokenExpired(e)},this.isTokenExpired=function(e){try{return i()(e).exp<Date.now()/1e3}catch(t){return console.log("Token expired."),!1}},this.setToken=function(e){localStorage.setItem("id_token",e)},this.getToken=function(){return localStorage.getItem("id_token")},this.logout=function(){localStorage.removeItem("id_token")},this.getConfirm=function(){var e=i()(t.getToken());return console.log("Received answer."),e},this.fetch=function(e,a){var r={Accept:"application/json","Content-Type":"application/json"};return t.loggedIn()&&(r.Authorization="Bearer "+t.getToken()),fetch(e,Object(n.a)({headers:r},a)).then(t._checkStatus).then(function(e){return e.json()})},this._checkStatus=function(e){if(e.status>=200&&e.status<300)return e;var t=new Error(e.statusText);throw t.response=e,t}})},1758:function(e,t,a){"use strict";a.r(t);var n=a(111),r=a(519),o=a(597),i=a(602),l=a(601),s=a(0),c=a.n(s),u=a(1429),d=a(1310),m=a(1210),p=a(1104),h=a(1105),g=a(1760),y=a(1211),E=a(1761),f=a(1762),w=a(1430),b=a(1311),k=a(1180),v=a(1103),C=a(1799),x=a(1796),O=a(1718),S={display:"block",width:"1rem",height:"1rem",marginLeft:"20px",backgroundColor:"grey",borderRadius:"0.5rem"},N={y:{duration:.3,yoyo:1/0,ease:"easeOut"},backgroundColor:{duration:.6,yoyo:1/0,ease:"easeOut",repeatDelay:.8}},z={y:{duration:.4,yoyo:1/0,ease:"easeOut"},backgroundColor:{duration:.6,yoyo:1/0,ease:"easeOut",repeatDelay:.8}};function T(e){return c.a.createElement(x.a,Object.assign({elevation:6,variant:"filled"},e))}var I={closed:{duration:.6,opacity:0,right:0,width:"50%",height:"100%",position:"absolute",zIndex:"10",background:"#20a8d8"},closed1:{opacity:0,right:0,width:"0%",height:"100%",position:"absolute",zIndex:"10",background:"#20a8d8"},open:{duration:.6,opacity:1,width:"100%",right:0,height:"100%",position:"absolute",zIndex:"10",background:"#20a8d8"}},j={closed:{opacity:0},open:{opacity:1}},_=function(e){Object(i.a)(a,e);var t=Object(l.a)(a);function a(){var e;Object(r.a)(this,a);for(var o=arguments.length,i=new Array(o),l=0;l<o;l++)i[l]=arguments[l];return(e=t.call.apply(t,[this].concat(i))).Auth=new v.a,e.state={username:"",password:"",open:!1,error:"",isOpen:!1,size:[0,0]},e._handleClose=function(t,a){"clickaway"!==a&&e.setState({open:!1,error:""})},e._handleChange=function(t){e.setState(Object(n.a)({},t.target.name,t.target.value))},e._handleFormSubmit=function(t){t.preventDefault(),e.setState({isOpen:!0}),console.log(e.state.size[0]),e.Auth.login(e.state.username,e.state.password).then(function(t){!1!==t&&("username wrong"==t.data||"password wrong"==t.data?e.setState({open:!0,isOpen:!1,error:t.data.toString()}):e.props.history.replace("/"))}).catch(function(t){console.log(e.state.isOpen),e.setState({open:!0,error:t,isOpen:!1})})},e}return Object(o.a)(a,[{key:"handleApi",value:function(e){}},{key:"handlesave",value:function(e){}},{key:"handlereset",value:function(e){}},{key:"componentDidUpdate",value:function(e,t,a){t.size[0]!==window.innerWidth&&this.setState({size:[window.innerWidth,window.innerHeight]})}},{key:"componentWillMount",value:function(){var e=this;window.addEventListener("resize",function(){e.setState({size:[window.innerWidth,window.innerHeight]})}),this.Auth.loggedIn()&&this.props.history.replace("/")}},{key:"render",value:function(){return c.a.createElement("div",{className:"app flex-row align-items-center"},c.a.createElement(u.a,null,c.a.createElement(d.a,{className:"justify-content-center"},c.a.createElement(m.a,{md:"8"},c.a.createElement(O.a.div,{className:"text-white bg-primary",style:{display:"flex",justifyContent:"center",alignItems:"center",opacity:this.state.size[0]<1e3?0:1,width:this.state.size[0]<1e3?"0%":"50%",right:0,height:this.state.size[0]<1e3?"0%":"100%",position:"absolute",zIndex:"10",background:"#20a8d8"},animate:this.state.isOpen?"open":"closed",variants:I},c.a.createElement(p.a,{className:"text-white bg-primary",style:{opacity:this.state.size[0]<1e3?0:1,width:"100%",height:"100%",margin:0}},c.a.createElement(h.a,{className:"text-center"},c.a.createElement("div",null,c.a.createElement("h1",null,c.a.createElement("b",null,"KOPI")),c.a.createElement("p",null,c.a.createElement("i",null,"Compliance and Regulatory, simplified.")),c.a.createElement("p",null,"\xa0"),c.a.createElement("p",null,"\xa0"),c.a.createElement("p",null,"\xa0"),c.a.createElement("p",null,c.a.createElement("b",null,"PT. Adapro Nusa Data"))))),c.a.createElement(O.a.div,{variants:j,animate:this.state.isOpen?"open":"closed",style:{opacity:this.state.size[0]<1e3?0:1,position:"absolute",zIndex:"15",display:"flex"}},c.a.createElement(O.a.span,{style:S,transition:N,animate:{y:["100%","-100%"],backgroundColor:["#005073","#005073"]}}),c.a.createElement(O.a.span,{style:S,transition:z,animate:{y:["100%","-100%"],backgroundColor:["#005073","#005073"]}}),c.a.createElement(O.a.span,{style:S,transition:N,animate:{y:["100%","-100%"],backgroundColor:["#005073","#005073"]}}))),c.a.createElement(g.a,null,c.a.createElement(p.a,{className:"p-4"},c.a.createElement(h.a,null,c.a.createElement(y.a,null,c.a.createElement("h1",null,"Login"),c.a.createElement("p",{className:"text-muted"},"Sign In to your account"),c.a.createElement(E.a,{className:"mb-3"},c.a.createElement(f.a,{addonType:"prepend"},c.a.createElement(w.a,null,c.a.createElement("i",{className:"icon-user"}))),c.a.createElement(b.a,{type:"text",name:"username",placeholder:"Username",autoComplete:"username",onChange:this._handleChange})),c.a.createElement(E.a,{className:"mb-4"},c.a.createElement(f.a,{addonType:"prepend"},c.a.createElement(w.a,null,c.a.createElement("i",{className:"icon-lock"}))),c.a.createElement(b.a,{type:"password",name:"password",placeholder:"Password",autoComplete:"current-password",onChange:this._handleChange})),c.a.createElement(d.a,null,c.a.createElement(m.a,{xs:"6"},c.a.createElement(k.a,{onClick:this._handleFormSubmit,color:"primary",className:"px-4"},"Login")),c.a.createElement(m.a,{xs:"6",className:"text-right"}))))),c.a.createElement(p.a,{className:"text-white bg-primary py-5 d-md-down-none",style:{width:"44%"}},c.a.createElement(h.a,{className:"text-center"},c.a.createElement("div",null,c.a.createElement("h1",null,c.a.createElement("b",null,"KOPI")),c.a.createElement("p",null,c.a.createElement("i",null,"Compliance and Regulatory, simplified.")),c.a.createElement("p",null,"\xa0"),c.a.createElement("p",null,"\xa0"),c.a.createElement("p",null,"\xa0"),c.a.createElement("p",null,c.a.createElement("b",null,"PT. Adapro Nusa Data")))))))),c.a.createElement(C.a,{open:this.state.open,autoHideDuration:2e3,onClose:this._handleClose},c.a.createElement(T,{onClose:this._handleClose,severity:""!=this.state.error.toString?"error":"info"},this.state.error.toString()))))}}]),a}(s.Component);t.default=_}}]);
//# sourceMappingURL=31.8bdf7cf3.chunk.js.map